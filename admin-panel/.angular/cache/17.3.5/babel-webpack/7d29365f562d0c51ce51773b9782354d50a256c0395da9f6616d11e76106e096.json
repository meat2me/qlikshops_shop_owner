{"ast":null,"code":"import { takeUntil } from 'rxjs/operators';\nimport { BaseComponent } from '@components/base/base.component';\nimport { AddRecipeComponent } from '@modals/add-recipe/add-recipe.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@services/alert.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@services/store.service\";\nimport * as i5 from \"@services/recipes.service\";\nimport * as i6 from \"@services/auth.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../../components/category-list/category-list.component\";\nimport * as i9 from \"@ngx-translate/core\";\nfunction RecipesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function RecipesComponent_div_3_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.createNewRecipe());\n    });\n    i0.ɵɵelement(4, \"i\", 11);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(7, \"div\", 12);\n    i0.ɵɵelementStart(8, \"div\", 13)(9, \"div\", 14)(10, \"div\", 15)(11, \"i\", 16);\n    i0.ɵɵlistener(\"click\", function RecipesComponent_div_3_Template_i_click_11_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedItem ? ctx_r1.editCategory() : null);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function RecipesComponent_div_3_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.removeCategory());\n    });\n    i0.ɵɵelement(13, \"i\", 18);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 6, \"recipe.new_recipe\"), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵclassProp(\"disabled\", !ctx_r1.selectedItem);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"btn-info\", !ctx_r1.selectedItem || (ctx_r1.selectedItem == null ? null : ctx_r1.selectedItem.children == null ? null : ctx_r1.selectedItem.children.length));\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.selectedItem || (ctx_r1.selectedItem == null ? null : ctx_r1.selectedItem.children == null ? null : ctx_r1.selectedItem.children.length));\n  }\n}\nfunction RecipesComponent_hr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"hr\", 19);\n  }\n}\nexport let RecipesComponent = /*#__PURE__*/(() => {\n  class RecipesComponent extends BaseComponent {\n    constructor(modalServ, alertServ, route, storeService, recipesServ, authServ) {\n      super();\n      this.modalServ = modalServ;\n      this.alertServ = alertServ;\n      this.route = route;\n      this.storeService = storeService;\n      this.recipesServ = recipesServ;\n      this.authServ = authServ;\n      this.isAdmin = this.authServ.isAdmin();\n    }\n    ngOnInit() {\n      this.route.paramMap.subscribe(params => {\n        const location = params.get('location');\n        if (location == 'shop-page') {\n          this.storeService.getSidebarChange(true);\n          this.isAdmin = false;\n          this.storeId = localStorage.getItem('STORE_ID').toString();\n        }\n      });\n      if (this.isAdmin) {\n        this.recipesServ.getAdminRecipes().pipe(takeUntil(this.destroyed$)).subscribe(res => {\n          this.recipes = res.recipes;\n        });\n      }\n    }\n    createNewRecipe() {\n      const modal = this.modalServ.open(AddRecipeComponent, {\n        centered: true\n      });\n      modal.componentInstance;\n      modal.result.then(this.addNewItem.bind(this));\n    }\n    addNewItem(recipe) {\n      this.recipes.push(recipe);\n    }\n    editCategory() {\n      const modal = this.modalServ.open(AddRecipeComponent, {\n        centered: true\n      });\n      const addModal = modal.componentInstance;\n      addModal.data = this.selectedItem;\n      modal.result.then(this.editItem.bind(this));\n    }\n    editItem(editedCat) {\n      let item = this.selectedItem;\n      item = Object.assign(this.selectedItem, editedCat);\n      this.selectedItem = Object.assign(item, editedCat);\n    }\n    removeCategory() {\n      this.showConfirmDelete().then(() => this.recipesServ.deleteRecipes(this.selectedItem.recipe_id).subscribe({\n        next: this.removeSelectedItem.bind(this),\n        error: console.error\n      }));\n    }\n    showConfirmDelete() {\n      return this.alertServ.showConfirm('modal.delete_recipe_title', 'modal.delete_recipe_content');\n    }\n    removeItem(i) {\n      const pos = this.recipes.indexOf(i);\n      if (pos < 0) {\n        return;\n      }\n      this.recipes.splice(pos, 1);\n    }\n    removeSelectedItem() {\n      const i = this.selectedItem;\n      this.selectedItem = null;\n      this.removeItem(i);\n    }\n    selectItem(item) {\n      this.selectedItem = item;\n    }\n    static #_ = this.ɵfac = function RecipesComponent_Factory(t) {\n      return new (t || RecipesComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.StoreService), i0.ɵɵdirectiveInject(i5.RecipesService), i0.ɵɵdirectiveInject(i6.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RecipesComponent,\n      selectors: [[\"app-recipes\"]],\n      features: [i0.ɵɵInheritDefinitionFeature],\n      decls: 7,\n      vars: 5,\n      consts: [[1, \"category\", \"p-4\", \"container\", \"direction-right\"], [1, \"row\", \"bg-light-gray\", \"rounded\"], [1, \"col-12\", \"p-4\"], [\"class\", \"control-section\", 4, \"ngIf\"], [\"class\", \"bg-primary\", 4, \"ngIf\"], [1, \"bg-super-light\", \"p-3\"], [3, \"selectedItemChange\", \"data\", \"selectedItem\", \"isRecipe\"], [1, \"control-section\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"px-0\", \"col-auto\"], [1, \"btn\", \"btn-primary\", \"px-4\", \"px-lg-5\", 2, \"direction\", \"ltr\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-plus\"], [1, \"d-none\", \"d-md-flex\", \"col-3\"], [1, \"col-auto\", \"pr-0\"], [1, \"d-flex\", \"align-items-center\"], [1, \"col-auto\"], [\"role\", \"button\", \"aria-hidden\", \"true\", 1, \"fas\", \"fa-lg\", \"fa-edit\", \"text-primary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", \"px-3\", \"py-0\", 2, \"border-radius\", \"2rem\", 3, \"click\", \"disabled\"], [1, \"fas\", \"fa-lg\", \"fa-times\"], [1, \"bg-primary\"]],\n      template: function RecipesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n          i0.ɵɵtemplate(3, RecipesComponent_div_3_Template, 14, 8, \"div\", 3)(4, RecipesComponent_hr_4_Template, 1, 0, \"hr\", 4);\n          i0.ɵɵelementStart(5, \"div\", 5)(6, \"app-category-list\", 6);\n          i0.ɵɵtwoWayListener(\"selectedItemChange\", function RecipesComponent_Template_app_category_list_selectedItemChange_6_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedItem, $event) || (ctx.selectedItem = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"data\", ctx.recipes);\n          i0.ɵɵtwoWayProperty(\"selectedItem\", ctx.selectedItem);\n          i0.ɵɵproperty(\"isRecipe\", true);\n        }\n      },\n      dependencies: [i7.NgIf, i8.CategoryListComponent, i9.TranslatePipe]\n    });\n  }\n  return RecipesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}