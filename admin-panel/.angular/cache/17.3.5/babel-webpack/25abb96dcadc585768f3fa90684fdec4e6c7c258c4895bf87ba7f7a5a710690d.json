{"ast":null,"code":"import _asyncToGenerator from \"/Users/roipk/Documents/TeamWork/qlikshops_shop_owner/admin-panel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { truncateBase64 } from 'app/utils/truncate-base64';\nimport { readFile } from '@utils/read-file';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../core/directive/upload.directive\";\nimport * as i4 from \"../../core/directive/dnd.directive\";\nfunction ImageInputComponent_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 10);\n    i0.ɵɵlistener(\"click\", function ImageInputComponent_img_8_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      const file_r4 = i0.ɵɵreference(2);\n      return i0.ɵɵresetView(ctx_r2.blocked ? ctx_r2.onBlock.emit() : file_r4.click());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    const decoded_r5 = i0.ɵɵreference(4);\n    i0.ɵɵproperty(\"src\", ctx_r2.tempImg || decoded_r5.value, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ImageInputComponent_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function ImageInputComponent_a_9_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.rmImage());\n    });\n    i0.ɵɵelement(1, \"i\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ImageInputComponent_div_10_i_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 15);\n  }\n}\nfunction ImageInputComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function ImageInputComponent_div_10_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      const file_r4 = i0.ɵɵreference(2);\n      return i0.ɵɵresetView(ctx_r2.blocked ? ctx_r2.onBlock.emit() : file_r4.click());\n    });\n    i0.ɵɵtemplate(1, ImageInputComponent_div_10_i_1_Template, 1, 0, \"i\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const decoded_r5 = i0.ɵɵreference(4);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !decoded_r5.value);\n  }\n}\nexport let ImageInputComponent = /*#__PURE__*/(() => {\n  class ImageInputComponent {\n    get imageDataCtrl() {\n      return this.formGroup.controls[this.formImageDataName];\n    }\n    get imageNameCtrl() {\n      return this.formGroup.controls[this.formImageName];\n    }\n    isUsingFormGroup() {\n      return !!this.formGroup;\n    }\n    constructor(controlContainer) {\n      this.controlContainer = controlContainer;\n      this.tempImg = '';\n      this.isDragging = false;\n      this.blocked = false;\n      this.formImageName = 'image_name';\n      this.formImageDataName = 'image';\n      this.formGroup = null;\n      this.isDeletable = true;\n      this.onBlock = new EventEmitter();\n    }\n    ngOnInit() {\n      if (this.isUsingFormGroup) {\n        this.formGroup = this.controlContainer.control;\n      }\n    }\n    onLoad(files) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const file = files[0];\n        _this.imageNameCtrl.setValue(file.name);\n        _this.tempImg = yield readFile(file);\n        _this.imageDataCtrl.setValue(truncateBase64(_this.tempImg));\n        _this.imageDataCtrl.markAsDirty();\n        _this.imageDataCtrl.markAsTouched();\n      })();\n    }\n    rmImage() {\n      this.tempImg = '';\n      if (this.isUsingFormGroup) {\n        this.imageDataCtrl.reset();\n        this.imageDataCtrl.markAsDirty();\n        this.imageNameCtrl.reset();\n        this.imageNameCtrl.markAsDirty();\n      } else {\n        this.formGroup.reset();\n        this.formGroup.markAsDirty();\n      }\n    }\n    static #_ = this.ɵfac = function ImageInputComponent_Factory(t) {\n      return new (t || ImageInputComponent)(i0.ɵɵdirectiveInject(i1.ControlContainer));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ImageInputComponent,\n      selectors: [[\"app-image-input\"]],\n      inputs: {\n        tempImg: \"tempImg\",\n        blocked: \"blocked\",\n        formImageName: \"formImageName\",\n        formImageDataName: \"formImageDataName\",\n        formGroup: \"formGroup\",\n        isDeletable: \"isDeletable\"\n      },\n      outputs: {\n        onBlock: \"onBlock\"\n      },\n      decls: 11,\n      vars: 6,\n      consts: [[\"file\", \"\"], [\"decoded\", \"\"], [\"name\", \"\"], [3, \"formGroup\"], [\"appUpload\", \"\", \"accept\", \"image/*\", \"type\", \"file\", 1, \"d-none\", 3, \"onFiles\"], [\"type\", \"text\", 1, \"d-none\", 3, \"formControlName\"], [\"appDnd\", \"\", \"accept\", \"image/*\", 1, \"w-100\", \"h-100\", \"position-relative\", \"d-flex\", \"align-items-center\", \"justify-content-between\", 3, \"onFileDrop\"], [\"class\", \"preview-img\", \"style\", \"object-fit: cover;\", \"alt\", \"\", \"role\", \"button\", 3, \"src\", \"click\", 4, \"ngIf\"], [\"role\", \"button\", \"class\", \"btn-close position-absolute d-flex align-items-center justify-content-center btn-info rounded-circle\", \"style\", \"height: 25px; width: 25px;\", 3, \"click\", 4, \"ngIf\"], [\"role\", \"button\", \"class\", \"draggable-area d-flex align-items-center justify-content-around w-100 h-100 py-3\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"\", \"role\", \"button\", 1, \"preview-img\", 2, \"object-fit\", \"cover\", 3, \"click\", \"src\"], [\"role\", \"button\", 1, \"btn-close\", \"position-absolute\", \"d-flex\", \"align-items-center\", \"justify-content-center\", \"btn-info\", \"rounded-circle\", 2, \"height\", \"25px\", \"width\", \"25px\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-times\"], [\"role\", \"button\", 1, \"draggable-area\", \"d-flex\", \"align-items-center\", \"justify-content-around\", \"w-100\", \"h-100\", \"py-3\", 3, \"click\"], [\"class\", \"fas fa-file-import fa-lg text-primary\", 4, \"ngIf\"], [1, \"fas\", \"fa-file-import\", \"fa-lg\", \"text-primary\"]],\n      template: function ImageInputComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementContainerStart(0, 3);\n          i0.ɵɵelementStart(1, \"input\", 4, 0);\n          i0.ɵɵlistener(\"onFiles\", function ImageInputComponent_Template_input_onFiles_1_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onLoad($event));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(3, \"input\", 5, 1)(5, \"input\", 5, 2);\n          i0.ɵɵelementStart(7, \"div\", 6);\n          i0.ɵɵlistener(\"onFileDrop\", function ImageInputComponent_Template_div_onFileDrop_7_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.blocked ? ctx.onBlock.emit() : ctx.onLoad($event));\n          });\n          i0.ɵɵtemplate(8, ImageInputComponent_img_8_Template, 1, 1, \"img\", 7)(9, ImageInputComponent_a_9_Template, 2, 0, \"a\", 8)(10, ImageInputComponent_div_10_Template, 2, 1, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementContainerEnd();\n        }\n        if (rf & 2) {\n          const decoded_r5 = i0.ɵɵreference(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.controlContainer.control || ctx.formGroup);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formControlName\", ctx.formImageDataName);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formControlName\", ctx.formImageName);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.tempImg || decoded_r5.value);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isDeletable && (ctx.tempImg || decoded_r5.value) && !ctx.blocked);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !(ctx.tempImg || decoded_r5.value));\n        }\n      },\n      dependencies: [i2.NgIf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.UploadDirective, i4.DndDirective],\n      styles: [\"[_nghost-%COMP%]{display:block;width:100px;height:100px}.draggable-area[_ngcontent-%COMP%]{border:2px dashed var(--primary);vertical-align:middle}.btn-close[_ngcontent-%COMP%]{top:2px;right:2px}.preview-img[_ngcontent-%COMP%]{width:100px;height:100px}\"]\n    });\n  }\n  return ImageInputComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}