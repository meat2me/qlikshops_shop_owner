{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { SmsVerificationModalComponent } from '@modals/sms-verification-modal/sms-verification-modal.component';\nimport { selectAuthState } from '@core/redux/app.states';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@services/auth.service\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ngx-translate/core\";\nimport * as i6 from \"@services/translated.service\";\nimport * as i7 from \"@services/store.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/forms\";\nfunction LoginComponent_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"(\", ctx_r0.stores == null ? null : ctx_r0.stores.name, \" \", i0.ɵɵpipeBind1(2, 2, \"NAME\"), \")\");\n  }\n}\nfunction LoginComponent_p_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.errors);\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(modalService, authSer, store, router, renderer, tranServ, translatedServ, storeServ) {\n      this.modalService = modalService;\n      this.authSer = authSer;\n      this.store = store;\n      this.router = router;\n      this.renderer = renderer;\n      this.tranServ = tranServ;\n      this.translatedServ = translatedServ;\n      this.storeServ = storeServ;\n      this.phoneNumber = new FormControl('', [Validators.required]);\n    }\n    ngOnInit() {\n      this.store.select(selectAuthState).subscribe(state => {\n        // tslint:disable-next-line: no-string-literal\n        if (state['isAuthenticated']) {\n          this.translatedServ.storedLanguage = 'he';\n          this.storeServ.getStoreInfo(this.store_id).subscribe(res => {\n            this.translatedServ.storedLanguage = 'he';\n          });\n          if (this.authSer.getUserType() === 3) {\n            this.router.navigate(['/home/owner-page']);\n          } else if (this.authSer.getUserType() === 1) {\n            this.router.navigate(['/home/admin-page']);\n          } else {}\n        }\n      });\n      this.tranServ.onLangChange.subscribe(this.changeLayout.bind(this));\n    }\n    changeLayout() {\n      const currLang = this.translatedServ.storedLanguage;\n      this.renderer.setAttribute(document.querySelector('html'), 'lang', currLang);\n    }\n    sendPhone() {\n      let phone;\n      let countryCode;\n      if (this.phoneNumber.valid) {\n        phone = this.phoneNumber.value;\n        this.authSer.sendNumber(countryCode, phone).subscribe(res => {\n          if (res.rc === 0) {\n            const modalRef = this.modalService.open(SmsVerificationModalComponent, {\n              centered: true\n            });\n            const component = modalRef.componentInstance;\n            component.countryCode = countryCode;\n            component.phone = phone;\n          }\n        });\n      } else {\n        this.errors = 'Invalid Phone Number';\n      }\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i5.TranslateService), i0.ɵɵdirectiveInject(i6.TranslatedService), i0.ɵɵdirectiveInject(i7.StoreService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 22,\n      vars: 15,\n      consts: [[1, \"login-container\", 2, \"background-image\", \"linear-gradient(to top left,#003c80, #2a82ca)\"], [1, \"container\", \"vh-100\", \"pt-5\"], [\"src\", \"/assets/images/m2m.png\", \"alt\", \"\", 2, \"width\", \"250px\"], [1, \"body\", \"text-white\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"direction-right\", 2, \"height\", \"calc(100% - 200px)\"], [1, \"py-3\"], [4, \"ngIf\"], [1, \"font-weight-bold\"], [1, \"form-group\"], [\"for\", \"phone-number\"], [\"id\", \"phone-number\", \"name\", \"phone-number\", \"type\", \"text\", 1, \"form-control\", \"w-50\", 3, \"formControl\"], [1, \"btn\", \"btn-dark\", \"w-50\", \"font-weight-bold\", 3, \"click\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\");\n          i0.ɵɵelement(3, \"img\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\")(6, \"h3\", 4);\n          i0.ɵɵtext(7);\n          i0.ɵɵpipe(8, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, LoginComponent_p_9_Template, 3, 4, \"p\", 5);\n          i0.ɵɵelementStart(10, \"p\", 6);\n          i0.ɵɵtext(11);\n          i0.ɵɵpipe(12, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"div\", 7)(14, \"label\", 8);\n          i0.ɵɵtext(15);\n          i0.ɵɵpipe(16, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(18, LoginComponent_p_18_Template, 2, 1, \"p\", 5);\n          i0.ɵɵelementStart(19, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_19_listener() {\n            return ctx.sendPhone();\n          });\n          i0.ɵɵtext(20);\n          i0.ɵɵpipe(21, \"translate\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 7, \"login.title\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.stores);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(12, 9, \"login.description\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 11, \"login.label\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formControl\", ctx.phoneNumber);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.errors);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 13, \"login.btn_login\"));\n        }\n      },\n      dependencies: [i8.NgIf, i9.DefaultValueAccessor, i9.NgControlStatus, i9.FormControlDirective, i5.TranslatePipe],\n      styles: [\".body[_ngcontent-%COMP%]{height:calc(100% - 200px)}\"]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}