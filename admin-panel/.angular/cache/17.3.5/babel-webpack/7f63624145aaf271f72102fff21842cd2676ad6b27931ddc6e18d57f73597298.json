{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@services/client.service\";\nimport * as i3 from \"@services/breadcrumb.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@ngx-translate/core\";\nexport let ClientDetailComponent = /*#__PURE__*/(() => {\n  class ClientDetailComponent {\n    constructor(route, clientServ, breadcrumbServ) {\n      this.route = route;\n      this.clientServ = clientServ;\n      this.breadcrumbServ = breadcrumbServ;\n      this.commentCtrl = new FormControl('');\n      this.customMessCtrl = new FormControl(true);\n      this.messageCtrl = new FormControl('');\n    }\n    ngOnInit() {\n      this.currency = localStorage.getItem('CURRENCY');\n      this.clientDetail = this.route.snapshot.data.clientDetail;\n      this.patchValues();\n      this.updateBreadCrumb();\n    }\n    updateBreadCrumb() {\n      const {\n        first_name,\n        last_name,\n        client_id\n      } = this.clientDetail;\n      this.breadcrumbServ.pushBreadcrumb({\n        label: `${first_name} ${last_name}`,\n        url: `/order/clients/details/${client_id}`\n      });\n    }\n    get clientId() {\n      return this.clientDetail.client_id;\n    }\n    get usePrefix() {\n      return this.customMessCtrl.value;\n    }\n    patchValues() {\n      this.commentCtrl.patchValue(this.clientDetail.comment);\n    }\n    saveComment() {\n      if (this.commentCtrl.pristine) {\n        return;\n      }\n      const comment = this.commentCtrl.value;\n      this.clientServ.setClientComment({\n        comment,\n        client_id: this.clientId\n      }).subscribe(res => {\n        this.commentCtrl.reset(comment);\n      });\n    }\n    sendMessage() {\n      if (this.messageCtrl.pristine) {\n        return;\n      }\n      let message = this.messageCtrl.value;\n      if (this.usePrefix) {\n        message = `${this.clientDetail.client_message_prefix} ${message}`;\n      }\n      this.clientServ.sendMessageToClient({\n        client_id: this.clientId,\n        message\n      }).subscribe(res => {\n        this.messageCtrl.reset('');\n      });\n    }\n    static #_ = this.ɵfac = function ClientDetailComponent_Factory(t) {\n      return new (t || ClientDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ClientService), i0.ɵɵdirectiveInject(i3.BreadcrumbService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClientDetailComponent,\n      selectors: [[\"app-client-detail\"]],\n      decls: 77,\n      vars: 48,\n      consts: [[1, \"account-setting\", \"p-4\", \"direction-right\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\", \"bg-light-gray\", \"rounded\", \"py-3\"], [1, \"m-2\", \"px-2\", \"p-4\", \"bg-super-light\", \"rounded\"], [1, \"d-flex\"], [1, \"col-3\", \"col-lg-2\"], [1, \"col-auto\", \"font-weight-bold\"], [1, \"d-flex\", \"mt-2\"], [1, \"d-flex\", \"align-items-center\", \"mt-2\"], [\"for\", \"comment\", 1, \"col-3\", \"col-lg-2\"], [1, \"col-6\"], [\"type\", \"text\", \"id\", \"comment\", 1, \"form-control\", 3, \"formControl\"], [1, \"col-3\", \"col-lg-1\", \"pl-1\"], [1, \"form-control\", \"btn-primary\", \"py-1\", 3, \"click\"], [\"for\", \"message\", 1, \"col-3\", \"col-lg-2\"], [\"hidden\", \"\", 1, \"col-9\", \"col-lg-6\"], [1, \"custom-control\", \"custom-checkbox\"], [\"type\", \"checkbox\", \"id\", \"message\", 1, \"custom-control-input\", 3, \"formControl\"], [\"for\", \"message\", 1, \"custom-control-label\"], [1, \"col-9\", \"col-lg-6\", \"mt-1\"], [1, \"w-100\", \"h-100-px\", \"form-control\", 3, \"placeholder\", \"formControl\"], [1, \"position-absolute\", \"btn\", \"btn-primary\", \"px-4\", \"py-1\", 2, \"bottom\", \"10px\", \"right\", \"30px\", 3, \"click\"], [1, \"\"], [1, \"bg-primary\"], [1, \"m-2\", \"px-4\"]],\n      template: function ClientDetailComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"label\", 6);\n          i0.ɵɵtext(7);\n          i0.ɵɵpipe(8, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 7);\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\", 6);\n          i0.ɵɵtext(13);\n          i0.ɵɵpipe(14, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 7);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 8)(18, \"label\", 6);\n          i0.ɵɵtext(19);\n          i0.ɵɵpipe(20, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 7);\n          i0.ɵɵtext(22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(23, \"div\", 8)(24, \"label\", 6);\n          i0.ɵɵtext(25);\n          i0.ɵɵpipe(26, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"div\", 7);\n          i0.ɵɵtext(28);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"div\", 8)(30, \"label\", 6);\n          i0.ɵɵtext(31);\n          i0.ɵɵpipe(32, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 7);\n          i0.ɵɵtext(34);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(35, \"div\", 9)(36, \"label\", 10);\n          i0.ɵɵtext(37);\n          i0.ɵɵpipe(38, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"div\", 11);\n          i0.ɵɵelement(40, \"input\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"div\", 13)(42, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ClientDetailComponent_Template_button_click_42_listener() {\n            return ctx.saveComment();\n          });\n          i0.ɵɵtext(43);\n          i0.ɵɵpipe(44, \"translate\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(45, \"div\", 8)(46, \"label\", 15);\n          i0.ɵɵtext(47);\n          i0.ɵɵpipe(48, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"div\", 16)(50, \"div\", 17);\n          i0.ɵɵelement(51, \"input\", 18);\n          i0.ɵɵelementStart(52, \"label\", 19);\n          i0.ɵɵtext(53);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(54, \"div\", 5);\n          i0.ɵɵelement(55, \"div\", 6);\n          i0.ɵɵelementStart(56, \"div\", 20);\n          i0.ɵɵelement(57, \"textarea\", 21);\n          i0.ɵɵpipe(58, \"translate\");\n          i0.ɵɵelementStart(59, \"button\", 22);\n          i0.ɵɵlistener(\"click\", function ClientDetailComponent_Template_button_click_59_listener() {\n            return ctx.sendMessage();\n          });\n          i0.ɵɵtext(60);\n          i0.ɵɵpipe(61, \"translate\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(62, \"div\", 23);\n          i0.ɵɵelement(63, \"hr\", 24);\n          i0.ɵɵelementStart(64, \"div\", 25)(65, \"div\", 5)(66, \"div\", 6);\n          i0.ɵɵtext(67);\n          i0.ɵɵpipe(68, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(69, \"div\", 7);\n          i0.ɵɵtext(70);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(71, \"div\", 8)(72, \"div\", 6);\n          i0.ɵɵtext(73);\n          i0.ɵɵpipe(74, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(75, \"div\", 7);\n          i0.ɵɵtext(76);\n          i0.ɵɵelementEnd()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 24, \"client-details.first_name\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.first_name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 26, \"client-details.last_name\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.last_name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 28, \"client-details.address\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.address);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 30, \"client-details.phone_number\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.phone_num);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 32, \"client-details.email\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.email);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(38, 34, \"client-details.comment\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formControl\", ctx.commentCtrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(44, 36, \"client-details.save\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(48, 38, \"client-details.msg_client\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formControl\", ctx.customMessCtrl);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.client_message_prefix);\n          i0.ɵɵadvance(4);\n          i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(58, 40, \"client-details.write_msg\"));\n          i0.ɵɵproperty(\"formControl\", ctx.messageCtrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(61, 42, \"client-details.send\"));\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(68, 44, \"client-details.number_orders\"), \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.clientDetail.num_of_orders);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(74, 46, \"client-details.total_order_price\"), \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate2(\" \", ctx.currency, \" \", ctx.clientDetail.order_total, \"\");\n        }\n      },\n      dependencies: [i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.FormControlDirective, i5.TranslatePipe]\n    });\n  }\n  return ClientDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}